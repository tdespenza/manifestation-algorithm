#!/usr/bin/env sh
# Pre-commit hook — lint, format, and typecheck.

set -e

echo ""
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo "  Pre-commit checks"
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"

echo ""
echo "▶ [1/4] Lint-staged (auto-fix staged files)..."
npx lint-staged

echo ""
echo "▶ [2/4] ESLint check..."
npm run lint:check

echo ""
echo "▶ [3/4] Prettier format check..."
npm run format:check

echo ""
echo "▶ [4/4] TypeScript type check..."
npx vue-tsc --noEmit

echo ""
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo "  ✓ All checks passed — committing."
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo ""
