#!/usr/bin/env sh
# Pre-commit hook — lint, format, and typecheck.
# Version bumping is handled in the commit-msg hook (needs the commit message).

set -e

echo ""
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo "  Pre-commit checks"
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"

echo ""
echo "▶ [1/3] Lint-staged (auto-fix staged files)..."
npx lint-staged

echo ""
echo "▶ [2/3] ESLint check..."
npm run lint:check

echo ""
echo "▶ [3/3] Prettier format check..."
npm run format:check

echo ""
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo "  ✓ Pre-commit checks passed."
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo ""
